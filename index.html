<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bean‚Äôs Dreams | Home</title>

  <!-- Page Styles -->
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="css/nav.css" />
  <link rel="stylesheet" href="css/cart.css" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Alex+Brush&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- AOS Library -->
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
</head>
<body>

  <!-- Navigation -->
  <div id="nav-placeholder"></div>

  <!-- HERO -->
  <header class="hero">
    <div class="hero-content">
      <div class="logo-container">
        <img src="imageslogo/beansbutterfly.png" alt="Bean's Dreams butterfly logo" class="logo-bounce-in">
      </div>
      <h1 data-aos="fade-up">Welcome to Bean‚Äôs Dreams</h1>
      <p data-aos="fade-up" data-aos-delay="200">Empowering you through movement, music, and healing</p>
      <h3 class="slide-text" data-aos="fade-left" data-aos-delay="400">Dance ‚Ä¢ Heal ‚Ä¢ Rise</h3>

      <!-- Lead Magnet Buttons -->
      <section class="lead-buttons">
        <button class="lead-toggle" data-target="pdfForm" aria-controls="pdfForm" aria-expanded="false">
          üåû Get Your Free Daily Energy Reset üåû
        </button>
        <button class="lead-toggle" data-target="introForm" aria-controls="introForm" aria-expanded="false">
          üéÅ Claim Your Free Intro Session
        </button>
      </section>

      <!-- PDF Form -->
      <section id="pdfForm" class="lead-form-section hidden" data-aos="fade-up">
        <h2 class="form-heading">üåû Daily Energy Reset PDF</h2>
        <button class="close-btn" aria-label="Close Form">‚úñ</button>
        <form action="https://formspree.io/f/xdkdvoal" method="POST" class="lead-form">
          <label for="name-pdf">Full Name</label>
          <input type="text" name="name" id="name-pdf" required placeholder="Your Name" autocomplete="name" />

          <label for="email-pdf">Email Address</label>
          <input type="email" name="email" id="email-pdf" required placeholder="you@example.com" autocomplete="email" />

          <label for="interest-pdf">Area of Interest</label>
          <select name="interest" id="interest-pdf" required>
            <option value="">-- Select One --</option>
            <option value="coaching">Coaching</option>
            <option value="dance">Dance</option>
            <option value="music">Music</option>
          </select>

          <label for="focus-pdf">What you'd like to work on</label>
          <input type="text" name="focus" id="focus-pdf" placeholder="e.g. confidence, creativity, healing" />

          <label for="message-pdf">Your goals or needs</label>
          <textarea name="message" id="message-pdf" rows="4" placeholder="Tell us more about your journey..."></textarea>

          <input type="hidden" name="_redirect" value="thankyou.html" />
          <button type="submit" class="submit-btn">Send My Free PDF</button>
        </form>
      </section>

      <!-- Intro Form -->
      <section id="introForm" class="lead-form-section hidden" data-aos="fade-up">
        <h2 class="form-heading">üéÅ Free Intro Session</h2>
        <button class="close-btn" aria-label="Close Form">‚úñ</button>
        <form action="https://formspree.io/f/mkgzebjn" method="POST" class="lead-form">
          <label for="name-intro">Full Name</label>
          <input type="text" name="name" id="name-intro" required placeholder="Your Name" autocomplete="name" />

          <label for="email-intro">Email Address</label>
          <input type="email" name="email" id="email-intro" required placeholder="you@example.com" autocomplete="email" />

          <label for="interest-intro">Area of Interest</label>
          <select name="interest" id="interest-intro" required>
            <option value="">-- Select One --</option>
            <option value="coaching">Coaching</option>
            <option value="dance">Dance</option>
            <option value="music">Music</option>
          </select>

          <label for="focus-intro">What you'd like to work on</label>
          <input type="text" name="focus" id="focus-intro" placeholder="e.g. confidence, creativity, healing" />

          <label for="message-intro">Your goals or needs</label>
          <textarea name="message" id="message-intro" rows="4" placeholder="Tell us more about your journey..."></textarea>

          <input type="hidden" name="_redirect" value="thankyou.html" />
          <button type="submit" class="submit-btn">Book My Free Intro</button>
        </form>
      </section>
    </div>
  </header>

  <!-- WHAT WE OFFER -->
  <section class="services" data-aos="fade-up">
    <h2>What We Offer</h2>
    <div class="service-cards">
      <!-- Coaching -->
      <div class="card" data-aos="zoom-in">
        <img src="imageslogo/coaching.png" alt="Illustration representing healing coaching">
        <h3><a href="coaching.html">Healing Coaching</a></h3>
        <p>One-on-one support for recovery, emotional regulation, and personal growth.</p>
      </div>
      <!-- Dance -->
      <div class="card" data-aos="zoom-in" data-aos-delay="150">
        <img src="imageslogo/dance.png" alt="Silhouette of dancer in motion">
        <h3><a href="classes.html#dance">Dance Classes</a></h3>
        <p>Tap, ballet, and movement-based classes that bring joy, strength, and artistry.</p>
      </div>
      <!-- Music -->
      <div class="card" data-aos="zoom-in" data-aos-delay="300">
        <img src="imageslogo/music.png" alt="Musical notes and guitar icon">
        <h3><a href="classes.html#music">Guitar & Singing</a></h3>
        <p>Private lessons that build confidence, technique, and creativity in performance.</p>
      </div>
      <!-- Courses -->
      <div class="card" data-aos="zoom-in" data-aos-delay="450">
        <img src="imageslogo/courses.png" alt="Laptop with online course materials">
        <h3><a href="store.html#courses">Online Courses</a></h3>
        <p>Self-paced programs in movement, music, and mindfulness for transformation.</p>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section class="testimonials" data-aos="fade-up" aria-label="Student testimonials">
    <h2>What Our Students Say</h2>
    <div class="carousel" role="region" aria-live="polite">
      <!-- Testimonials ... -->
      <!-- (Keep your testimonial divs here as before) -->
    </div>
    <div class="carousel-dots" role="tablist" aria-label="Testimonial navigation">
      <!-- Dots ... -->
    </div>
  </section>

  <!-- OUR MISSION -->
  <section class="our-mission" data-aos="fade-up">
    <h2>Our Mission</h2>
    <div class="flourish"></div>
    <div class="mission-content">
      <img src="imageslogo/nick.jpg" alt="Portrait of Nick Bean" class="mission-photo" data-aos="fade-right">
      <p data-aos="fade-up">
        At Bean‚Äôs Dreams, our mission is to inspire healing, confidence, and creativity through music, movement, and coaching.
      </p>
      <img src="imageslogo/rebecca.jpg" alt="Portrait of Rebecca Bean" class="mission-photo" data-aos="fade-left">
    </div>
  </section>

  <!-- FAQ -->
  <section class="faq" data-aos="fade-up">
    <h2>Frequently Asked Questions</h2>
    <!-- FAQ items ... -->
  </section>
  
  <!-- CART SIDEBAR -->
  <div id="cart" class="cart-sidebar" aria-label="Shopping cart" aria-hidden="true" role="complementary">
    <h3>Your Cart</h3>
    <ul id="cart-items"></ul>
    <div class="cart-total">Total: $<span id="cart-total">0.00</span></div>
    <button id="close-cart" class="btn close-cart-btn" aria-label="Close cart">Close</button>
  </div>

  <!-- Cart Toggle Button -->
  <button id="cart-toggle" class="btn cart-toggle-btn" aria-label="Toggle cart">
    üõí Cart (<span id="cart-count">0</span>)
  </button>

  <!-- PayPal Button Container -->
  <div id="paypal-button-container"></div>

  <!-- FOOTER -->
  <footer class="site-footer" data-aos="fade-up">
    <p>¬© <span id="year"></span> Bean's Dreams ‚Äî Dance ‚Ä¢ Heal ‚Ä¢ Rise</p>
  </footer>

  <!-- Scripts -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script src="js/nav.js" defer></script>
  <script src="js/cart.js" defer></script>
  <script src="js/index.js" defer></script>

  <!-- PayPal SDK (load once globally) -->
  <script src="https://www.paypal.com/sdk/js?client-id=AVhdcxMFlhEnAaJN0_ju-Kjgxo5djvN3Q5VMCVtxrc2fZknJjXNTiLQzWmNel_qUZAjuSOhML2hiU9ct"></script>

  <!-- Inline initializers: nav loader, cart toggle, testimonials, FAQ, lead forms, AOS, year -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    /* ---------------------------
       Navigation loader (simple with minimal fallback)
       --------------------------- */
    fetch("navigation.html")
      .then(r => r.ok ? r.text() : Promise.reject())
      .then(html => {
        const el = document.getElementById("nav-placeholder");
        if (el) el.innerHTML = html;
      })
      .catch(() => {
        const el = document.getElementById("nav-placeholder");
        if (el) {
          el.innerHTML = `
            <nav class="site-nav" role="navigation" aria-label="Main navigation">
              <ul class="nav-list">
                <li><a href="/">Home</a></li>
                <li><a href="/classes.html">Classes</a></li>
                <li><a href="/coaching.html">Coaching</a></li>
                <li><a href="/contact.html">Contact</a></li>
              </ul>
            </nav>
          `;
        }
      });

    /* ---------------------------
       Cart accessibility and toggle
       --------------------------- */
    const cartEl = document.getElementById('cart');
    const cartToggle = document.getElementById('cart-toggle');
    const closeCartBtn = document.getElementById('close-cart');

    function setCartOpen(open) {
      if (!cartEl || !cartToggle) return;
      if (open) {
        cartEl.classList.add('open');
        cartEl.setAttribute('aria-hidden', 'false');
        cartToggle.setAttribute('aria-expanded', 'true');
        // trap focus basic: focus first interactive element
        const focusable = cartEl.querySelector('button, a, input, select, textarea');
        if (focusable) focusable.focus();
      } else {
        cartEl.classList.remove('open');
        cartEl.setAttribute('aria-hidden', 'true');
        cartToggle.setAttribute('aria-expanded', 'false');
        cartToggle.focus();
      }
    }

    if (cartToggle && cartEl) {
      cartToggle.addEventListener('click', () => {
        const isOpen = cartEl.classList.contains('open');
        setCartOpen(!isOpen);
      });
    }
    if (closeCartBtn) {
      closeCartBtn.addEventListener('click', () => setCartOpen(false));
    }
    // Close on Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && cartEl && cartEl.classList.contains('open')) {
        setCartOpen(false);
      }
    });
    // Close when clicking outside
    document.addEventListener('click', (e) => {
      if (!cartEl || !cartEl.classList.contains('open')) return;
      const isClickInsideCart = cartEl.contains(e.target);
      const isClickToggle = cartToggle && cartToggle.contains(e.target);
      if (!isClickInsideCart && !isClickToggle) setCartOpen(false);
    });

    // Optional global API
    window.BeanCart = {
      open: () => setCartOpen(true),
      close: () => setCartOpen(false),
      toggle: () => setCartOpen(!cartEl.classList.contains('open'))
    };

    /* ---------------------------
       Lead form toggles
       --------------------------- */
    const toggles = Array.from(document.querySelectorAll('.lead-toggle'));
    const forms = Array.from(document.querySelectorAll('.lead-form-section'));
    const closeBtns = Array.from(document.querySelectorAll('.close-btn'));

    toggles.forEach(btn => {
      btn.addEventListener('click', () => {
        const targetId = btn.dataset.target;
        if (!targetId) return;
        // hide all
        forms.forEach(f => { f.classList.add('hidden'); f.classList.remove('visible'); });
        // show target
        const target = document.getElementById(targetId);
        if (target) {
          target.classList.remove('hidden');
          requestAnimationFrame(() => target.classList.add('visible'));
          btn.setAttribute('aria-expanded', 'true');
          const first = target.querySelector('input, select, textarea, button');
          if (first) first.focus();
        }
      });
    });

    closeBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const parent = btn.closest('.lead-form-section');
        if (!parent) return;
        parent.classList.add('hidden');
        parent.classList.remove('visible');
        const related = document.querySelector(`.lead-toggle[data-target="${parent.id}"]`);
        if (related) {
          related.setAttribute('aria-expanded', 'false');
          related.focus();
        }
      });
    });

    /* ---------------------------
       Testimonials carousel
       --------------------------- */
    const testimonials = Array.from(document.querySelectorAll('.testimonial'));
    const dots = Array.from(document.querySelectorAll('.dot'));
    let tIndex = 0;
    let tTimer = null;

    function showTestimonial(i) {
      if (!testimonials.length) return;
      tIndex = i % testimonials.length;
      testimonials.forEach((t, j) => t.classList.toggle('active', j === tIndex));
      dots.forEach((d, j) => {
        d.classList.toggle('active', j === tIndex);
        d.setAttribute('aria-selected', j === tIndex ? 'true' : 'false');
      });
    }

    if (testimonials.length && dots.length) {
      dots.forEach((dot, i) => {
        dot.addEventListener('click', () => {
          showTestimonial(i);
          if (tTimer) clearInterval(tTimer);
          tTimer = setInterval(() => showTestimonial((tIndex + 1) % testimonials.length), 4000);
        });
      });
      showTestimonial(0);
      tTimer = setInterval(() => showTestimonial((tIndex + 1) % testimonials.length), 4000);
    }

    /* ---------------------------
       FAQ accordion
       --------------------------- */
    const questions = Array.from(document.querySelectorAll('.faq-question'));
    questions.forEach(q => {
      if (!q.hasAttribute('aria-expanded')) q.setAttribute('aria-expanded', 'false');
      const answerId = q.getAttribute('aria-controls');
      const answer = answerId ? document.getElementById(answerId) : null;
      if (answer) answer.hidden = true;

      q.addEventListener('click', () => {
        const answerEl = answerId ? document.getElementById(answerId) : null;
        if (!answerEl) return;
        const isOpen = q.getAttribute('aria-expanded') === 'true';
        q.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
        answerEl.hidden = isOpen;
      });
    });

    /* ---------------------------
       AOS init and refresh + Footer year
       --------------------------- */
    if (window.AOS && typeof AOS.init === 'function') {
      AOS.init({ duration: 700, easing: 'ease-out-quart', once: true });
    }
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    if (window.AOS && typeof AOS.refresh === 'function') {
      setTimeout(() => AOS.refresh(), 250);
    }

    /* ---------------------------
       PayPal Buttons render
       --------------------------- */
    if (window.paypal && typeof paypal.Buttons === 'function') {
      paypal.Buttons().render('#paypal-button-container');
    }
  });
  </script>
</body>
</html>
